
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Result</title>

    <style>
    
    #chart{
            width: 1200px;
            height: 1000px;
            background-color: #f7f7f7;
            margin: 25px auto;
        }
        

    </style> 
</head>
<body>    

    <div id="chart"></div>
    <script src="https://d3js.org/d3.v5.min.js"></script> 
<script>
    let dados = {{ melhoresRotas }};
    let nos = [];
    let chart_width = 1200;
    let chart_height = 1000;
    let posicaoInicialX = 0;
    let posicaoInicialY = 100;

    for(let i = 0; i < Object.keys(dados).length; i++ ) {
       nos.push(Object.keys(dados)[i]);      
    }

    let svg = d3.select('#chart')
            .append('svg')
            .attr('width',chart_width)
            .attr('height', chart_height);

    let dragLine = svg
        .append("path")
        .attr("class", "dragLine hidden")
        .attr("d", "M0,0 L0,0");

    svg.selectAll('circle')
        .data(nos)
        .enter()
        .append('circle')
        .attr('r', 20)
        .attr('cx',function(d, i){
            if( i % 4 == 0 ) {
                posicaoInicialX = 175;
            }  else {
                posicaoInicialX += 256; 
            }

            return posicaoInicialX;
        })
        .attr('cy', function(d, i) {
            if(i % 4 == 0 && i != 0) {
                posicaoInicialY += 200;
            } else if(i == 0 ) {
                posicaoInicialY = 100;
            }

            return posicaoInicialY;
        })
        .attr('fill', '#7ED26D')
        .attr('id', function(d){
            return 'circle'+d;
        });

    function updateDragLine() {
        var coords = d3.mouse(d3.event.currentTarget);
        dragLine.attr(
            "d",
            "M" +
            mousedownNode.x +
            "," +
            mousedownNode.y +
            "L" +
            coords[0] +
            "," +
            coords[1]
        );
    }

</script>
</body>
</html>

